all: fuse-expand

EXPAND_DIR   = ../

MYFLAGS      = -g  -Wall -Wextra -static -D_REENTRANT -DPOSIX_THREADS -DHAVE_CONFIG_H -DLINUX -DXPNI_LOWFSI_XPN -D_GNU_SOURCE -DBUILD_LITE -DHAVE_STRUCT_IOVEC
MYHEADERS    =  -I../include
MYLIBS       =  -L../lib -lxpn

FUSE_DIR=/home/bbergua/fuse-2.7.0

%.o: %.c
	gcc -I/home/bbergua/fuse-2.7.0/include -D_FILE_OFFSET_BITS=64 $(MYFLAGS) $(MYHEADERS) -c -o $@ $<
	@#if gcc -DHAVE_CONFIG_H -I. -I$(FUSE_DIR)/include -D_FILE_OFFSET_BITS=64 -D_REENTRANT   -Wall -Wextra -W -Wno-sign-compare -Wstrict-prototypes -Wmissing-declarations -Wwrite-strings -g -O2 -fno-strict-aliasing -MT $@ -MD -MP -MF ".deps/hello.Tpo" $(MYFLAGS) $(MYHEADERS) -c -o $@ $<; then mv -f ".deps/hello.Tpo" ".deps/hello.Po"; else rm -f ".deps/hello.Tpo"; exit 1; fi


fuse-expand: fuse-expand.o ../lib/libxpn.a
	gcc -o $@ $< $(MYLIBS) -L/home/bbergua/fuse-2.7.0/lib/ -lfuse -lpthread -Wl,--rpath -Wl,/usr/lib

clean:
	rm -f *.o fuse-expand
